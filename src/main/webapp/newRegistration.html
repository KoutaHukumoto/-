<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>新規登録</title>
	<link rel="stylesheet" href="css/newRegistration.css">
</head>

<body>

	<div class="point">パスワードのルール<br>・5文字以上8文字以下<br>・英数字であること<br>・特殊記号は使用できません</div>


	<form action="/Dosukoi-Analytics/RegisterServlet" method="POST" onsubmit="return check()">
		<div class="form">
			<label>ニックネーム:</label>
			<input type="text" name="name" class="form-control"><br>

			<label>パスワード:</label>
			<input type="password" name="pass" class="form-control"><br>

			<label>もう一度入力:</label>
			<input type="password" name="Password again" class="form-control"><br>
		</div>
		<div class="newreg">
			<p id="error-message" style="color:red;"></p>
		</div>
		<div class="newbutton">
			<button type="submit">新規登録</button>
		</div>
	</form>

	<br>
	
	<div class="backbutton">
	<button onclick="location.href='toppage.html'">戻る</button>
	</div>

	<script>
		function check() {
			const name = document.querySelector('input[name="name"]').value;
			const pass1 = document.querySelector('input[name="pass"]').value;
			const pass2 = document.querySelector('input[name="Password again"]').value;
			const errorMessage = document.getElementById('error-message');

			// 名前の長さを確認（5～8文字）
			if (name.length < 5 || name.length > 8) {
				errorMessage.textContent = "名前は5文字以上8文字以下にしてください。";
				return false;
			}
			
			// パスワードの長さを確認（5～8文字）
			if (pass1.length < 5 || pass1.length > 8) {
				errorMessage.textContent = "パスワードは5文字以上8文字以下にしてください。";
				return false;
			}

			// パスワードが英数字のみかどうかを確認
			const regex = /^[a-zA-Z0-9]+$/;
			if (!regex.test(pass1)) {
				errorMessage.textContent = "パスワードは英数字のみ使用できます。";
				return false;
			}

			// パスワードの一致を確認
			if (pass1 !== pass2) {
				errorMessage.textContent = "パスワードが一致しません。";
				return false;
			}

			// エラーメッセージをリセット
			errorMessage.textContent = "";
			return true;
		}
	</script>
</body>

</html>