<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>新規登録</title>
</head>

<body>

	<p>パスワードのルール<br>・5文字以上8文字以下<br>・英数字であること<br>・特殊記号は使用できません</p>

	<form action="RegisterServlet" method="POST" onsubmit="return check()">
		<label>ニックネーム:</label>
		<input type="text" name="name" class="form-control"><br>

		<label>パスワード:</label>
		<input type="password" name="pass1" class="form-control"><br>

		<label>もう一度入力:</label>
		<input type="password" name="pass2" class="form-control"><br>

		<p id="error-message" style="color:red;"></p>

		<button type="submit">新規登録</button>
	</form>

	<br>

	<button onclick="location.href='toppage.html'">戻る</button>

	<script>
		function check() {
			const id = document.querySelector('input[name="name"]').value;
			const pass1 = document.querySelector('input[name="pass1"]').value;
			const pass2 = document.querySelector('input[name="pass2"]').value;
			const errorMessage = document.getElementById('error-message');

			// パスワードの長さを確認（5～8文字）
			if (pass1.length < 5 || pass1.length > 8) {
				errorMessage.textContent = "パスワードは5文字以上8文字以下にしてください。";
				return false;
			}

			// パスワードが英数字のみかどうかを確認
			const regex = /^[a-zA-Z0-9]+$/;
			if (!regex.test(pass1)) {
				errorMessage.textContent = "パスワードは英数字のみ使用できます。";
				return false;
			}

			// パスワードの一致を確認
			if (pass1 !== pass2) {
				errorMessage.textContent = "パスワードが一致しません。";
				return false;
			}

			// エラーメッセージをリセット
			errorMessage.textContent = "";
			return true;
		}
	</script>
</body>

</html>